<!DOCTYPE html>
<html>
<head>
    <title>–®–∞—Ö–º–∞—Ç–Ω—ã–π AI</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
</head>
<body>
    <div class="container">
        <h1>‚ôüÔ∏è –®–∞—Ö–º–∞—Ç–Ω—ã–π AI</h1>
        
        <div class="theme-control">
            <button id="theme-btn">üåô –í–∫–ª—é—á–∏—Ç—å —Ç—ë–º–Ω—É—é —Ç–µ–º—É</button>
        </div>
        
        <div id="board" style="width: 400px; margin: 20px auto;"></div>
        
        <div class="controls">
            <button id="analyze-btn">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é</button>
            <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å –¥–æ—Å–∫—É</button>
        </div>
        
        <div id="result"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.js"></script>
    <script>
        // –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º Stockfish –ø—Ä—è–º–æ –≤ HTML —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å CDN
        function loadStockfish() {
            return new Promise((resolve) => {
                const worker = new Worker(URL.createObjectURL(new Blob([`
                    self.importScripts('https://cdn.jsdelivr.net/npm/stockfish.js@17.1/stockfish.js');
                    self.importScripts('https://cdn.jsdelivr.net/npm/stockfish.js@17.1/stockfish.wasm.js');
                    
                    self.onmessage = (e) => {
                        if (e.data === 'init') {
                            Stockfish().then((sf) => {
                                self.sf = sf;
                                self.sf.onmessage = (msg) => self.postMessage(msg.data);
                                self.postMessage('ready');
                            });
                        } else if (self.sf) {
                            self.sf.postMessage(e.data);
                        }
                    };
                `], { type: 'text/javascript' })));
                
                worker.postMessage('init');
                worker.onmessage = (e) => {
                    if (e.data === 'ready') resolve(worker);
                    else if (typeof worker.onData === 'function') worker.onData(e);
                };
                
                worker.onData = null;
                resolve(worker);
            });
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
